(this["webpackJsonpchess-tactics"]=this["webpackJsonpchess-tactics"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(0),c=n.n(o),a=n(15),u=n.n(a),i=(n(23),n(4)),s=n.n(i),f=n(6),l=n(3),b=(n(25),n(16)),p=n.n(b),v=n(26);function d(e,t){var n=new v(e),r=n.move(t);return r?{fullMove:r,fen:n.fen()}:null}function h(e,t,n){if(0===n.length)return null;var r=d(e,t);return r&&r.fullMove.san===n[0]?{fen:r.fen,solution:n.slice(1)}:null}var j=function(e){var t=e.tactic,n=e.onIncorrect,c=e.onSolve,a=Object(o.useState)(t.fen),u=Object(l.a)(a,2),i=u[0],s=u[1],f=Object(o.useState)(function(e){return new v(e).turn()}(t.fen)),b=Object(l.a)(f,1)[0],j=Object(o.useState)(t.solution),O=Object(l.a)(j,2),g=O[0],x=O[1];Object(o.useEffect)((function(){setTimeout((function(){var e=d(t.fen,t.blunderMove);e&&s(e.fen)}),100)}),[t]);return Object(r.jsx)(p.a,{transitionDuration:200,position:i,width:400,orientation:"b"===b?"white":"black",onDrop:function(e){return function(e){var t=h(i,e,g);if(t)if(s(t.fen),x(t.solution),t.solution.length>0){var r=h(t.fen,t.solution[0],t.solution);r&&(s(r.fen),x(r.solution))}else c();else n()}({from:e.sourceSquare,to:e.targetSquare,promotion:"q"})}})},O=n(17),g=n.n(O);function x(){return m.apply(this,arguments)}function m(){return(m=Object(f.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("https://cors-everywhere-proxy.herokuapp.com/https://chessblunders.org/api","/blunder/get"),{type:"explore"});case 2:return t=e.sent,n=t.data.data,e.abrupt("return",{id:n.id,fen:n.fenBefore,blunderMove:n.blunderMove,solution:n.forcedLine});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){var e=Object(o.useState)(!0),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)({id:"start",fen:"start",blunderMove:"e4",solution:["e5"]}),u=Object(l.a)(a,2),i=u[0],b=u[1],p=function(){var e=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.t0=b,e.next=5,x();case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(0),console.log("Error loading tactic",{error:e.t2});case 12:return e.prev=12,c(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){p()}),[]),Object(r.jsxs)("div",{className:"flex-center",children:[Object(r.jsx)("h1",{children:"Tactics Trainer"}),Object(r.jsx)(j,{tactic:i,onIncorrect:function(){return console.log("Incorrect")},onSolve:function(){return p()}},i.id),n&&Object(r.jsx)("div",{className:"overlay-loading",children:"Loading..."})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(w,{})}),document.getElementById("root")),S()}},[[47,1,2]]]);
//# sourceMappingURL=main.54c2556b.chunk.js.map